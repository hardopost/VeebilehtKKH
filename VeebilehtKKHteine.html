<!DOCTYPE html>
<html lang="et">

<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="Veebilehtstylesteine.css">
	<link rel="stylesheet" href="koond.css">
	<title>Masinkood</title>
</head>

<body>

	<h1 class="pealkiri">Masinkood</h1>

	<button class="tablink" onclick="openPage('Sissejuhatus', this, 'red')" id="defaultOpen">Sissejuhatus</button>
	<button class="tablink" onclick="openPage('Malu', this, 'red')">Mälu</button>
	<button class="tablink" onclick="openPage('KaheAstmed', this, 'red')">Kahe astmed</button>
	<button class="tablink" onclick="openPage('Ylesanded', this, 'red')">Ülesanded</button>
	<button class="tablink" onclick="openPage('KasutatudAllikad', this, 'red')">Kasutatud allikad</button>

	<div id="Sissejuhatus" class="tabcontent">

		<h3 class="centertitle">Tere tulemast</h3>
		
		<div class="keskkonteiner">
			<p class="centertitlenoborder">
			Tutvume:
			</p>
			<p class="smalltext">
			Mälu adresseerimisega<br><br>
			Masinkoodi ja programmide ülesehitusega<br><br>
			CISC arvuti käsustikuga<br><br>
			Alamprogrammide väljakutsumine<br><br>
			Masinkoodi käskude struktuur
			</p>
			<br>
		</div>
	</div>

	<div id="Malu" class="tabcontent">
		<h3 class="centertitle">Mälu</h3>

		<div class="row">
			<div class="column">
				<ul>
				<li>Mälu on sõnade kogum</li>
				<li>Igal mälupesal on oma kindel nimi - aadress</li>
				<li>Tavaliselt on selleks arvud 0 ... 2^k - 1</li>
				<li>Mälu koosneb miljonitest rakkudest</li>
				<li>Igas rakus saame salvestada ühe biti infot - ehk siis võimalikud olekud on 0 ja 1</li>
				<li>Tavaliselt loetakse-kirjutatakse infot n biti kaupa</li>
				<li>Andmeühikuks on sõna, ingl word, kus n on sõna pikkus</li>
				<li>Tänapäevastes arvutites on sõna pikkuseks 16 – 64 bitti</li>
				<li>Baidi aadressid sõnas
					<ul>
					<li>On kaks varianti sõna sees baitide paigutamiseks
					<ul>
						<li>Little-Endian
						<ul>
						<li>Väiksema aadressiga mälupesad sisaldavad arvu <b>madalamaid</b> bitte</li>
						</ul>
						</li>
						<li>Big-Endian
						<ul>
						<li>Väiksema aadressiga mälupesad sisaldavad arvu <b>kõrgemaid</b> bitte</li>
						</ul>
						</li>
					</ul>
					</li>
					</ul>
				</li>
				</ul>
			</div>
			<div class="column">
				<img alt="Stack Overflow" src="pildid/sõnad.png" style="width:100%">
			</div>
		</div>

		<div class="keskkonteiner">
			<pre>   </pre>
			<img alt="Stack Overflow" src="pildid/mälu.png" style="width:80%">
			<pre>	</pre>

		</div>

		<pre>	</pre>

		<h3 class="centertitle">CISC arvuti</h3>
		<div class="row">
			<div class="column">
				<img alt="Stack Overflow" src="pildid/cisc.png" style="width:100%">
			</div>
			<div class="column">
				<ul style="list-style-type:disc;">
					<li>CISC
						<ul>
						<li>Complex Instruction Set Computer</li>
						<li>Lubab kasutada erineva pikkusega käske – St käsk võib olla pikem kui üks sõna</li>
						<li>Operand võib olla ka mälupesa</li>
						<li>Sellised käsud on reeglina juba küllaltki keerulised</li>
						</ul>
					</li>
					<li>Pildil on näidisprogramm CISC arvutis
						<ul>
						<li>Käsud Add R1,R1,(R3) ja Add R3,R3,#4</li>
						<li>Saame kokku võtta käsuks Add R1,(R3)+</li>
						</ul>
					</li>
					<li><i>Subroutine linkage</i> method
						<ul>
						<li>Link-registris salvestatakse tagasipöördumise aadress (sisuliselt PC sisu)</li>
						<li>Tagasipöördumisel viidatakse kaudselt sellele registrile</li>
						<li>Probleem</li>
						<li>Sageli juhtub nii, et alamprogrammi sees on tarvis kasutada teist alamprogrammi</li>
						<li>ka selle alamprogrammi jaoks on vaja link-registris salvestada tagasipöördumise aadress</li>
						<li>Lahendus: kasutatakse pinu</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>

	<div id="KaheAstmed" class="tabcontent">
		<h3 class="centertitle">Kahe astmed</h3>
		<div class="row">
			<div class="column">
				<h2 class="centertitlenoborder">Kümnendsüsteem</h2>
				<table class="bigtable" style="width:100%">
					<tr>
						<td>K</td>
						<td>1000 = 10^3</td>
					</tr>
					<tr>
						<td>M</td>
						<td>1 000 000 = 10^6</td>
					</tr>
					<tr>
						<td>G</td>
						<td>1 000 000 000 = 10^9</td>
					</tr>
					<tr>
						<td>T</td>
						<td>1 000 000 000 000 = 10^12</td>
					</tr>
				</table>
			</div>
			<div class="column">
				<h2 class="centertitlenoborder">Kahe astmed</h2>
				<table class="bigtable" style="width:100%">
					<tr>
						<td>Ki</td>
						<td>2^10 = 1024</td>
					</tr>
					<tr>
						<td>Mi</td>
						<td>2^20 = 1 048 576</td>
					</tr>
					<tr>
						<td>Gi</td>
						<td>2^30 = 1 073 741 824</td>
					</tr>
					<tr>
						<td>Ti</td>
						<td>2^40 = 1 099 511 627 776</td>
					</tr>
				</table>
				</div>
			</div>

			<p class="centertitle">kilo, mega, giga, tera, kibi, mebi, gibi, tebi</p>

	</div>

	<div id="Ylesanded" class="tabcontent">
		<h3 class="centertitle">Ülesanded</h3>


		<div class="kysimus">

			<p>Kas käsu <b>Add R2,R1,R0</b> täitmine muudab registri R0 sisu?</p>
			<br>
			Vastus: <input type="text" class="input" name="vastus">
			<p class="vastus">Vastus: Ei</p>

		</div>

		<div class="kysimus">

			<p>Kas käsu <b>Add R0,R1,R2</b> täitmine muudab registri R2 sisu?</p>
			<br>
			Vastus: <input type="text" class="input" name="vastus">
			<p class="vastus">Vastus: Ei</p>

		</div>

		<div class="kysimus">

			<p>RISC protsessoris lastakse käima järgmine ASM-programm</p>
			<table style="width:25%">
				<tr>
					<td>1000</td>
					<td>Load R1,LOC1</td>
				</tr>
				<tr>
					<td>1004</td>
					<td>Add R1,R1,R2</td>
				</tr>
				<tr>
					<td>1008</td>
					<td>Store R1,LOC1</td>
				</tr>
				<tr>
					<td>1012</td>
					<td>Subtract R5,R2,#10</td>
				</tr>
			</table>
			<p><b>Milline on selle programmi käivitamise järel registri R1 sisu</b>, kui algselt oli registrite sisu alljärgnev:</p>
			<p>R1 = 1197</p>
			<p>R2 = 1308</p>
			<p>R3 = 1359</p>
			<p>R4 = 1827</p>
			<p>R5 = 1003</p>
			<p>Ja mälupesas LOC1 oli algselt arv 1379</p>
			<br>
			Vastus: <input type="text" class="input" name="vastus"><br>
			<p class="vastus">Vastus: 2687</p>

		</div>


		<div class="kysimus">

			<p>CISC protsessoris lastakse käima järgmine ASM-programm</p>
			<table style="width:25%">
				<tr>
					<td>1000</td>
					<td>Move R1,LOC1</td>
				</tr>
				<tr>
					<td>1004</td>
					<td>Add R1,R1,R2</td>
				</tr>
				<tr>
					<td>1008</td>
					<td>Move LOC1,R1</td>
				</tr>
				<tr>
					<td>1012</td>
					<td>Subtract R5,(R1)+,#10</td>
				</tr>
			</table>
			<p><b>Milline on selle programmi käivitamise järel registri R1 sisu</b>, kui algselt oli registrite sisu alljärgnev:</p>
			<p>R1 = 1982</p>
			<p>R2 = 1693</p>
			<p>R3 = 1888</p>
			<p>R4 = 1662</p>
			<p>R5 = 1440</p>
			<p>Ja mälupesas LOC1 oli algselt arv 1613</p>
			<br>
			Vastus: <input type="text" class="input" name="vastus"><br>
			<p class="vastus">Vastus: 3310</p>

		</div>
		
		
		<div class="kysimus">
		
			<p><i>Stack pointer</i> viitab mälupesale 1980. Programm lisab pinusse alamprogrammi jaoks 4 parameetrit, kutsub välja alamprogrammi.</p>
			<p>Alamprogramm salvestab pinus tagasipöördumise aadressi, <i>Frame pointeri</i> sisu, 2 lokaalmuutujat ja 2 registri sisu.</p>
			<p>Milline on <i>Stack pointeri</i> väärtus peale nimetet operatsioonide sooritamist, kui sõna pikkuseks on 16 bitti ja tegemist on bait-adresseeritava mäluga?</p>
			<br>
			Vastus: <input type="text" class="input" name="vastus"><br>
			<p class="vastus">Vastus: 1960</p>

		</div>

		<div class="kysimus">
			<div class="submit">
				<button class="nupp" onclick="submitAnswers()">Valmis</button>
				<pre>   </pre>
				<p id="punktid" class="vastus">Punktid</p>
				<pre>   </pre>
				<button id="uuesti" class="nupp" onclick="tryAgain()">Proovi uuesti</button>
			</div>
		</div>
	</div>

	<div id="KasutatudAllikad" class="tabcontent">

		<h3 class="centertitle">Kasutatud allikad</h3>
		
		<div class="keskkonteiner">
			<br>
			<p class="centertitlenoborder">
			Arvuti Arhitektuur<br><br>
			Toomas Plank<br>
			</p>

			<div class="logokonteiner">
				<a href="https://www.w3schools.com">
				<img alt="W3Schools" src="pildid/logo_w3schools.png" style="width:55%">
				</a>

				<br>

				<a href="https://www.stackoverflow.com">
				<img alt="Stack Overflow" src="pildid/logo_stackoverflow.png" style="width:50%">
				</a>
			</div>
		</div>
	</div>
	
<script>

function openPage(pageName, elmnt, color) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  tablinks = document.getElementsByClassName("tablink");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].style.backgroundColor = "";
  }

  document.getElementById(pageName).style.display = "block";

  elmnt.style.backgroundColor = color;
}

document.getElementById("defaultOpen").click();

<!-- Kasutatud allikas: https://www.w3schools.com/howto/howto_js_tabs.asp -->


answers(false)

function submitAnswers() {
	var sisendid = document.getElementsByClassName("input");
	var vastused = document.getElementsByClassName("vastus");
	answers(true);

	var punktid = 0;
	for (i = 0; i < sisendid.length; i++) {
		if (sisendid[i].value.toLowerCase() == vastused[i].innerHTML.slice(8).toLowerCase()) {
			punktid++;
			sisendid[i].style.backgroundColor = "#49fb36";
		}
		else {
			sisendid[i].style.backgroundColor = "red";
		}
	}

	var tekst = document.getElementById("punktid");
	tekst.innerHTML = "Punktid: " + punktid + "/" + sisendid.length;
}

function tryAgain() {
	answers(false)
	var sisendid = document.getElementsByClassName("input");
	for (i = 0; i < sisendid.length; i++) {
		sisendid[i].style.backgroundColor = "";
		sisendid[i].value = "";
	}
}

function answers(visible) {
	var vastused = document.getElementsByClassName("vastus");
	var uuesti = document.getElementById("uuesti");
	if (visible) {
		for (i = 0; i < vastused.length; i++) {
			vastused[i].style.display = "block";
		}
		uuesti.style.display = "block";
	}
	else {
		for (i = 0; i < vastused.length; i++) {
			vastused[i].style.display = "none";
		}
		uuesti.style.display = "none";
	}
}

</script>

</body>

</html>
